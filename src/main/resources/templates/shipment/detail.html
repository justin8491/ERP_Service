<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{include/layout/defaultLayout.html}">

<th:block layout:fragment="Content">
  <div>
    <div class="p-3 mb-3 bxShadow">
      <div class="row">
        <div class="form-group w-50">
          <label>출고 ID</label>
          <input type="text" class="form-control" th:value="${shipment.shipId}" readonly>
        </div>
        <div class="form-group w-50">
          <label>품목명</label>
          <input type="text" class="form-control" th:value="${shipment.itemName}" readonly>
        </div>
        <div class="form-group w-50">
          <label>요청 수량</label>
          <input type="text" class="form-control" th:value="${shipment.reqQty}" readonly>
        </div>
        <div class="form-group w-50">
          <label>출고 수량</label>
          <input type="text" class="form-control" th:value="${shipment.qty}" readonly>
        </div>
        <div class="form-group w-50">
          <label>상태</label>
          <input type="text" class="form-control" th:value="${shipment.status}" readonly>
        </div>
        <div class="form-group w-50">
          <label>요청 날짜</label>
          <input type="text" class="form-control" th:value="${#temporals.format(shipment.reqDate, 'yyyy-MM-dd')}" readonly>
        </div>
        <div class="form-group w-50">
          <label>위치</label>
          <input type="text" class="form-control" th:value="${shipment.loc}" readonly>
        </div>
      </div>

      <form th:if="${shipment.status == 'REQUESTED' or shipment.status == 'PROCESSING'}"
            th:action="@{/shipment/partial-complete/{id}(id=${shipment.shipId})}" method="post" style="display: inline;">
        <input type="number" name="qty" required placeholder="출고수량" class="form-control form-control-sm d-inline" style="width: 100px;">
        <button type="submit" class="btn btn-success">부분 출고</button>
      </form>
      <form th:if="${shipment.status == 'REQUESTED' or shipment.status == 'PROCESSING'}"
            th:action="@{/shipment/update-quantity/{id}(id=${shipment.shipId})}" method="post" style="display: inline;">
        <input type="number" name="newQty" required placeholder="새 수량" class="form-control form-control-sm d-inline" style="width: 100px;">
        <button type="submit" class="btn btn-primary">수량 변경</button>
      </form>
      <form th:if="${shipment.status == 'REQUESTED' or shipment.status == 'PROCESSING'}"
            th:action="@{/shipment/update-status}" method="post" style="display: inline;">
        <input type="hidden" name="shipId" th:value="${shipment.shipId}">
        <select name="status" class="form-control form-control-sm d-inline" style="width: 120px;">
          <option value="PROCESSING">처리중</option>
          <option value="COMPLETED">완료</option>
          <option value="CANCELLED">취소</option>
        </select>
        <button type="submit" class="btn btn-primary">상태 변경</button>
      </form>

      <div class="tableBtn">
        <a th:href="@{/shipment/list}" class="btn btn-outline-primary mr-2">목록</a>
        <a th:href="@{/shipment/check-stock/{id}(id=${shipment.shipId})}" class="btn btn-primary">재고 확인</a>
      </div>

    </div>
  </div>
</th:block>
</html>